(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),s=a.n(l),o=a(72),c=a(9),i=a(13),u=a(15),m=a(14),h=(a(79),a(80),a(47)),p=a.n(h),d=function e(){var t=this;Object(c.a)(this,e),this.login=function(e){return t.service.post("/login",e)},this.signup=function(e){return console.log(e),t.service.post("/signup",e)},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=p.a.create({baseURL:"".concat("http://myapp.herokuapp.com/api"),withCredentials:!0})},E=a(7),g=a(44),f=a(34),b=a(16),v=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).logout=function(){n.AuthService.logout().then((function(){n.props.setTheUser(!1),n.props.handleToast(!0,"Usuario desconectado")})).catch((function(e){return console.log(e)}))},n.AuthService=new d,n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,{bg:"dark",variant:"dark",expand:"lg",sticky:"top"},r.a.createElement(g.a.Brand,null,r.a.createElement(b.b,{to:"/"},"Indie.")),r.a.createElement(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(g.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(f.a,{className:"ml-auto"},r.a.createElement(f.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/",exact:!0,activeStyle:{color:"white"}},"Home")),r.a.createElement(f.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/artists",activeStyle:{color:"white"}},"Artists")),this.props.loggedInUser?r.a.createElement(f.a.Link,{as:"span"},r.a.createElement("span",{onClick:this.logout},"Log Out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/signup",activeStyle:{color:"white"}},"Register")),r.a.createElement(f.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/login",activeStyle:{color:"white"}},"Log In"))),r.a.createElement(f.a.Link,{as:"span"},r.a.createElement(b.c,{to:"/profile",activeStyle:{color:"white"}},"Hello, ",this.props.loggedInUser?this.props.loggedInUser.username:"guest")))))}}]),a}(n.Component),S=a(56),I=function(e){var t=e.visible,a=e.text,n=e.handleToast;return r.a.createElement(S.a,{style:{position:"fixed",left:"10px",bottom:"10px",width:"300px"},show:t,onClose:function(){return n(!1)},delay:3e3,autohide:!0},r.a.createElement(S.a.Header,null," ",r.a.createElement("strong",{className:"mr-auto"},"Indie")," "),r.a.createElement(S.a.Body,null,a))},O=function e(){var t=this;Object(c.a)(this,e),this.getAllArtists=function(){return t.service.get("/getAllArtists")},this.getOneArtist=function(e){return t.service.get("/getOneArtist/".concat(e))},this.editArtist=function(e,a){return console.log(e,a),t.service.put("/edit/".concat(e),a)},this.service=p.a.create({baseURL:"".concat("http://myapp.herokuapp.com/api","/artists"),withCredentials:!0})},C=(a(71),a(40)),w=a(17),U=function(e){var t=e.imageUrl,a=e.username,n=e.occupation,l=e._id;return r.a.createElement(w.a,{md:4},r.a.createElement(C.a,{border:"dark",className:"artist-card"},r.a.createElement(C.a.Img,{variant:"top",src:t}),r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null,a),r.a.createElement(C.a.Text,null,n),r.a.createElement(b.b,{to:"/getOneArtist/".concat(l),className:"btn btn-dark btn-block btn-sm"},"See Details."))))},y=a(30),j=a(5),k=a(24),x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(y.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.props.profileData._id;console.log(t,n.state),n.artistService.editArtist(t,n.state).then((function(){return n.props.handleArtistSubmit()})).catch((function(e){return console.log(e)}))},n.state={username:n.props.profileData.username,password:"",occupation:n.props.profileData.occupation,description:n.props.profileData.description,contactInfo:n.props.profileData.contactInfo},n.artistService=new O,n}return Object(i.a)(a,[{key:"render",value:function(){return console.log(this.state),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Edit Profile"),r.a.createElement("hr",null),r.a.createElement(j.a,{onSubmit:this.handleFormSubmit},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Username"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.username,name:"username",type:"text",placeholder:this.state.username,className:"text-muted"})),this.state.password=r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Password"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"text"}),r.a.createElement(j.a.Text,{className:"text-muted"},"New password here.")),r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Occuaption"),r.a.createElement(j.a.Control,{as:"select",onChange:this.handleInputChange,value:this.state.occupation,name:"occuaption",type:"text",placeholder:this.state.occupation},r.a.createElement("option",null,"Options:"),r.a.createElement("option",null,"Singer/Songwriter"),r.a.createElement("option",null,"Producer"),r.a.createElement("option",null,"DJ"),r.a.createElement("option",null,"Instrumentalist"))),r.a.createElement(j.a.Group,{controlId:"exampleForm.ControlTextarea1"},r.a.createElement(j.a.Label,null,"About Me"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.description,name:"description",type:"text",placeholder:this.state.description,as:"textarea",rows:"3",className:"text-muted"})),r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Email"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.contactInfo,name:"contactInfo",type:"text",placeholder:this.state.contactInfo,className:"text-muted"})),r.a.createElement(k.a,{variant:"dark",type:"submit"},"Submit Changes")))}}]),a}(n.Component),A=(a(104),function(){return r.a.createElement("div",{className:"spinner"})}),T=a(25),L=a(26),D=a(39),N=a(54),M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){return n.updateArtistList()},n.updateArtistList=function(){n.artistService.getAllArtists().then((function(e){return n.setState({artists:e.data})})).catch((function(e){return console.log(e)}))},n.handleModal=function(e){return n.setState({showModal:e})},n.handleArtistSubmit=function(){n.handleModal(!1),n.updateArtistList()},n.state={artists:void 0,showModal:!1},n.artistService=new O,n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{as:"main",className:"artist-page"},r.a.createElement("h1",null,"Our Independent Artists."),r.a.createElement(j.a,null,r.a.createElement(N.a,{type:"text",placeholder:"Search Independent Artists...",className:"mr-md-2 search"}),r.a.createElement(k.a,{variant:"outline-dark",className:"search"},"Search")),this.state.artists?r.a.createElement(L.a,null,this.state.artists.map((function(e){return r.a.createElement(U,Object.assign({key:e._id},e))}))):r.a.createElement(A,null)),r.a.createElement(D.a,{size:"lg",show:this.state.showModal,onHide:function(){return e.handleModal(!1)}},r.a.createElement(D.a.Body,null,r.a.createElement(x,{handleArtistSubmit:this.handleArtistSubmit}))))}}]),a}(n.Component),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;console.log(t),e.artistService.getOneArtist(t).then((function(t){return console.log(t.data),e.setState({artistDetails:t.data})})).catch((function(e){return console.log(e)}))},e.state={artistDetails:void 0},e.artistService=new O,e}return Object(i.a)(a,[{key:"render",value:function(){return this.state.artistDetails?r.a.createElement(T.a,{as:"main"},r.a.createElement("h1",null,this.state.artistDetails.title),r.a.createElement(L.a,null,r.a.createElement(w.a,{md:{span:4,offset:1}},r.a.createElement("p",null,r.a.createElement("b",null)," ",this.state.artistDetails.username),r.a.createElement("hr",null),r.a.createElement("img",{src:this.state.artistDetails.imageUrl,className:"rounded",alt:"profile"})),r.a.createElement(w.a,{md:{span:5,offset:1}},r.a.createElement("p",null,r.a.createElement("b",null,"Occupation:"),r.a.createElement("br",null),this.state.artistDetails.occupation),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("b",null,"About:"),r.a.createElement("br",null),this.state.artistDetails.description),r.a.createElement("hr",null),r.a.createElement(b.b,{className:"btn btn-dark btn-md",to:"/artists"},"Go Back")))):r.a.createElement("h3",null,"Loading...")}}]),a}(n.Component),G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(y.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.authService.signup(n.state).then((function(e){n.props.setTheUser(e.data),n.props.handleToast(!0,"Registro completado"),n.props.history.push("/profile")})).catch((function(e){return console.log(e.response.data.message)}))},n.state={name:"",username:"",password:"",occupation:"",contact:"",work:""},n.authService=new d,n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(T.a,{as:"main"},r.a.createElement(L.a,null,r.a.createElement(w.a,{md:{offset:3,span:6}},r.a.createElement("h3",null,"Artist Registration"),r.a.createElement("hr",null),r.a.createElement(j.a,{onSubmit:this.handleFormSubmit},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Username"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.username,name:"username",type:"text"}),r.a.createElement(j.a.Text,{className:"text-muted"},"Preferably your artistic name")),r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Password"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password"}),r.a.createElement(j.a.Text,{className:"text-muted"},"3 character minimum")),r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Email"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.contact,name:"contact",type:"text"})),r.a.createElement(j.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(j.a.Label,null,"Occupation"),r.a.createElement(j.a.Control,{as:"select",onChange:this.handleInputChange,value:this.state.occupation,name:"occupation",type:"text"},r.a.createElement("option",null,"Options:"),r.a.createElement("option",null,"Singer/Songwriter"),r.a.createElement("option",null,"Producer"),r.a.createElement("option",null,"DJ"),r.a.createElement("option",null,"Instrumentalist (guitar, bass, drums, etc.)"))),r.a.createElement(k.a,{variant:"dark",type:"submit"},"Register")))))}}]),a}(n.Component),B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(y.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.authService.login(n.state).then((function(e){n.props.setTheUser(e.data),n.props.handleToast(!0,"Sesi\xf3n inciada"),n.props.history.push("/")})).catch((function(e){return console.log(e.response.data.message)}))},n.state={username:"",password:""},n.authService=new d,n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(T.a,{as:"main"},r.a.createElement(L.a,null,r.a.createElement(w.a,{md:{offset:3,span:6}},r.a.createElement("h3",null,"Log In"),r.a.createElement("hr",null),r.a.createElement(j.a,{onSubmit:this.handleFormSubmit},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Username"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.username,name:"username",type:"text"})),r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Password"),r.a.createElement(j.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password"}),r.a.createElement(j.a.Text,{className:"text-muted"},"3 character minimum")),r.a.createElement(k.a,{variant:"dark",type:"submit"},"Log In")))))}}]),a}(n.Component),P=(a(105),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).getUserData=function(){console.log(e.props.loggedInUser._id),e.artistService.getOneArtist(e.props.loggedInUser._id).then((function(t){return e.setState({profile:t.data})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){return e.getUserData()},e.handleModal=function(t){return e.setState({showModal:t})},e.handleArtistSubmit=function(){e.handleModal(!1),e.getUserData()},e.state={profile:void 0},e.artistService=new O,e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"hello"},"Hello, ",this.props.loggedInUser.username,"."),r.a.createElement(T.a,{as:"main"},r.a.createElement(L.a,null,r.a.createElement(w.a,{md:{span:5,offset:0}},r.a.createElement("img",{src:this.props.loggedInUser.imageUrl,alt:"profile",className:"imageProfile"}),r.a.createElement("p",null,this.props.loggedInUser.occupation),r.a.createElement("p",null,this.props.loggedInUser.contactInfo)),r.a.createElement(w.a,{md:{span:5,offset:6}},r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("b",null,"About Me:  "),this.props.loggedInUser.description),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("b",null,"Favorites: ")," "),r.a.createElement("hr",null),r.a.createElement(k.a,{onClick:function(){return e.handleModal(!0)},variant:"dark",size:"sm",style:{marginBottom:"20px"}},"Edit"),r.a.createElement("hr",null),r.a.createElement(b.b,{className:"btn btn-dark btn-md linkBack",to:"/artists"},"Go Back")),r.a.createElement(w.a,{md:{span:4,offset:1}}))),r.a.createElement(D.a,{size:"lg",show:this.state.showModal,onHide:function(){return e.handleModal(!1)}},r.a.createElement(D.a.Body,null,r.a.createElement(x,{handleArtistSubmit:this.handleArtistSubmit,profileData:this.state.profile}))))}}]),a}(n.Component)),H=(a(106),function(){return r.a.createElement("section",{className:"header"},r.a.createElement("h1",null,"Indie."),r.a.createElement("p",null,"The best website for information on independent artists."))}),R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).setTheUser=function(t){return e.setState({loggedInUser:t},(function(){return console.log("El estado de App ha cambiado:",e.state)}))},e.fetchUser=function(){e.AuthService.isLoggedIn().then((function(t){return null===e.state.loggedInUser&&e.setState({loggedInUser:t.data})})).catch((function(e){return console.log({err:e})}))},e.handleToast=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(o.a)({},e.state.toast);n={visible:t,text:a},e.setState({toast:n})},e.state={loggedInUser:null,toast:{visible:!1,text:""}},e.AuthService=new d,e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser,handleToast:this.handleToast}),r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",render:function(){return r.a.createElement(H,null)}}),r.a.createElement(E.b,{path:"/profile",render:function(){return e.state.loggedInUser?r.a.createElement(P,{loggedInUser:e.state.loggedInUser}):r.a.createElement(E.a,{to:"/signup"})}}),r.a.createElement(E.b,{exact:!0,path:"/artists",render:function(){return r.a.createElement(M,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(E.b,{path:"/getOneArtist/:id",render:function(e){return r.a.createElement(F,e)}}),r.a.createElement(E.b,{path:"/signup",render:function(t){return r.a.createElement(G,Object.assign({},t,{setTheUser:e.setTheUser,handleToast:e.handleToast}))}}),r.a.createElement(E.b,{path:"/login",render:function(t){return r.a.createElement(B,Object.assign({},t,{setTheUser:e.setTheUser,handleToast:e.handleToast}))}})),r.a.createElement(I,Object.assign({},this.state.toast,{handleToast:this.handleToast})))}}]),a}(n.Component);s.a.render(r.a.createElement(b.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null))),document.getElementById("root"))},71:function(e,t,a){},74:function(e,t,a){e.exports=a(107)},80:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.89d1e7b5.chunk.js.map